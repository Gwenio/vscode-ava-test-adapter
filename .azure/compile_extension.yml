# template for compiling the extension sources
steps:
  - script: pnpm install --prefer-frozen-lockfile --ignore-scripts --filter ./private/types
    displayName: Install Type Deps
  - script: |
      pnpm install --prefer-frozen-lockfile --ignore-scripts --filter ./private/ipc
      pnpx tsc --project tsconfig.json
    displayName: Compile IPC
    workingDirectory: private/ipc
  - script: |
      pnpm install --prefer-frozen-lockfile --ignore-scripts --filter ./extension/adapter
      pnpx tsc --project tsconfig.json
    displayName: Compile Adapter
    workingDirectory: extension/adapter
  - script: |
      pnpm install --prefer-frozen-lockfile --ignore-scripts --filter ./extension/worker
      pnpx tsc --project tsconfig.json
    displayName: Compile Worker
    workingDirectory: extension/worker
