# template for prepare the extension for packing
parameters:
  deps: true

steps:
  - script: |
      pnpm install --prefer-frozen-lockfile --ignore-scripts
      pnpx rollup -c
    displayName: Rollup Bundles
    workingDirectory: meta/build
  - script: |
      pnpm install --prefer-frozen-lockfile --ignore-scripts
      pnpx gulp prepare
    displayName: Prepare Pack Deps
    workingDirectory: meta/deps
    condition: and(succeeded(), eq('${{ parameters.deps }}', 'true'))
  - script: pnpx gulp prepare
    displayName: Add Pack Deps
    workingDirectory: meta/build
    condition: and(succeeded(), eq('${{ parameters.deps }}', 'true'))
